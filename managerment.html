<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Các thẻ meta và tiêu đề còn lại -->
    <link rel="Icon" href="img/Volkswagen_Logo_till_1995.svg.png">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="style1.css" />
    <title>Control</title>
  </head>
  <body>
    <!-- Nội dung trang -->
    <section class="services" id="services">
        <div class="heading">
            <span>Welcome to Tower Controls -Chào Mừng Đến Với Quyền Quản Trị Tháp</span>
            <h1>Easy Controls - In Out Slots Parking <br>Logical Operation </h1>
            <img class="moving-image" src="img/puma1.png" alt="Description of the image">
        </div>
        <div class="services-container">
            <div class="box">
                <div class="box-img">
                    <!-- Thay đổi giá trị của thuộc tính src dưới đây -->
                    <img id="carImage1" src="img/volk_1.jpg" alt="">
                </div>
                <p>2023</p>
                <h3>Location 1</h3>
                <h2>$5850 | $55 <span>Week/day</span> </h2>
                <a href="#form" class="btn parking-car-btn1">Parking Car</a>
                <a href="#form" class="btn get-car-btn1">Get Car</a>
            </div>
    
            <div class="box">
                <div class="box-img">
                    <!-- Thay đổi giá trị của thuộc tính src dưới đây -->
                    <img id="carImage2" src="img/volk_1.jpg" alt="">
                </div>
                <p>2023</p>
                <h3>Location 2</h3>
                <h2>$5850 | $55 <span>Week/day</span> </h2>
                <a href="#form" class="btn parking-car-btn2">Parking Car</a>
                <a href="#form" class="btn get-car-btn2">Get Car</a>
            </div>
    
            <div class="box">
                <div class="box-img">
                    <!-- Thay đổi giá trị của thuộc tính src dưới đây -->
                    <img id="carImage3" src="img/volk_1.jpg" alt="">
                </div>
                <p>2023</p>
                <h3>Location 3</h3>
                <h2>$5850 | $55 <span>Week/day</span> </h2>
                <a href="#form" class="btn parking-car-btn3">Parking Car</a>
                <a href="#form" class="btn get-car-btn3">Get Car</a>
            </div>
    
            <div class="box">
                <div class="box-img">
                    <!-- Thay đổi giá trị của thuộc tính src dưới đây -->
                    <img id="carImage4" src="img/volk_1.jpg" alt="">
                </div>
                <p>2023</p>
                <h3>Location 4</h3>
                <h2>$5850 | $55 <span>Week/day</span> </h2>
                <a href="#form" class="btn parking-car-btn4">Parking Car</a>
                <a href="#form" class="btn get-car-btn4">Get Car</a>
            </div>
    
            <div class="box">
                <div class="box-img">
                    <!-- Thay đổi giá trị của thuộc tính src dưới đây -->
                    <img id="carImage5" src="img/volk_1.jpg" alt="">
                </div>
                <p>2023</p>
                <h3>Location 5</h3>
                <h2>$5850 | $55 <span>Week/day</span> </h2>
                <a href="#form" class="btn parking-car-btn5">Parking Car</a>
                <a href="#form" class="btn get-car-btn5">Get Car</a>
            </div>
    
            <div class="box">
                <div class="box-img">
                    <!-- Thay đổi giá trị của thuộc tính src dưới đây -->
                    <img id="carImage6" src="img/volk_1.jpg" alt="">
                </div>
                <p>2023</p>
                <h3>Location 6</h3>
                <h2>$5850 | $55 <span>Week/day</span> </h2>
                <a href="#form" class="btn parking-car-btn6">Parking Car</a>
                <a href="#form" class="btn get-car-btn6">Get Car</a>
            </div>
    
    
            <div class="box">
                <div class="box-img">
                    <!-- Thay đổi giá trị của thuộc tính src dưới đây -->
                    <img id="carImage7" src="img/volk_1.jpg" alt="">
                </div>
                <p>2023</p>
                <h3>Location 7</h3>
                <h2>$5850 | $55 <span>Week/day</span> </h2>
                <a href="#form" class="btn parking-car-btn7">Parking Car</a>
                <a href="#form" class="btn get-car-btn7">Get Car</a>
            </div>
    
    
            <div class="box">
                <div class="box-img">
                    <!-- Thay đổi giá trị của thuộc tính src dưới đây -->
                    <img id="carImage8" src="img/volk_1.jpg" alt="">
                </div>
                <p>2023</p>
                <h3>Location 8</h3>
                <h2>$5850 | $55 <span>Week/day</span> </h2>
                <a href="#form" class="btn parking-car-btn8">Parking Car</a>
                <a href="#form" class="btn get-car-btn8">Get Car</a>
            </div>


            

            <script>
                $(document).ready(function () {
    $('.parking-car-btn1').on('click', function () {
        // Điền dữ liệu vào các trường
        var rollNo = 1; // Số tương ứng với giá trị "rollNo"
        var name = 10; // Giá trị tương ứng với "name"

        // Thay đổi hình ảnh
        $('#carImage1').attr('src', 'img/car1.jpg');

        // Đặt giá trị vào các trường có số tương ứng là "rollNo" và "name"
        $('#roll' + rollNo).val(rollNo);
        $('#name' + rollNo).val(name);
    });
});
    
                    
                $(document).ready(function () {
                    $('.parking-car-btn1').on('click', function () {
                        // Điền dữ liệu vào các trường
                        $('#roll').val('1');
                        $('#name').val('10');
    
                        // Thay đổi hình ảnh
                        $('#carImage1').attr('src', 'img/car1.jpg');
                    });
    
                    $('.get-car-btn1').on('click', function () {
                        // Điền dữ liệu vào các trường
                        $('#roll').val('1');
                        $('#name').val('12');
    
                        // Thay đổi hình ảnh
                        $('#carImage1').attr('src', 'img/volk_1.jpg');
                    });
                });
    
                $(document).ready(function () {
                    $('.parking-car-btn2').on('click', function () {
                        // Điền dữ liệu vào các trường
                        $('#roll').val('2');
                        $('#name').val('10');
    
                        // Thay đổi hình ảnh
                        $('#carImage2').attr('src', 'img/car1.jpg');
                    });
    
                    $('.get-car-btn2').on('click', function () {
                        // Điền dữ liệu vào các trường
                        $('#roll').val('2');
                        $('#name').val('12');
    
                        // Thay đổi hình ảnh
                        $('#carImage2').attr('src', 'img/volk_1.jpg');
                    });
                });
    
                $(document).ready(function () {
                    $('.parking-car-btn3').on('click', function () {
                        // Điền dữ liệu vào các trường
                        $('#roll').val('3');
                        $('#name').val('10');
    
                        // Thay đổi hình ảnh
                        $('#carImage3').attr('src', 'img/car1.jpg');
                    });
    
                    $('.get-car-btn3').on('click', function () {
                        // Điền dữ liệu vào các trường
                        $('#roll').val('3');
                        $('#name').val('12');
    
                        // Thay đổi hình ảnh
                        $('#carImage3').attr('src', 'img/volk_1.jpg');
                    });
                });
    
                $(document).ready(function () {
                    $('.parking-car-btn4').on('click', function () {
                        // Điền dữ liệu vào các trường
                        $('#roll').val('4');
                        $('#name').val('10');
    
                        // Thay đổi hình ảnh
                        $('#carImage4').attr('src', 'img/car1.jpg');
                    });
    
                    $('.get-car-btn4').on('click', function () {
                        // Điền dữ liệu vào các trường
                        $('#roll').val('4');
                        $('#name').val('12');
    
                        // Thay đổi hình ảnh
                        $('#carImage4').attr('src', 'img/volk_1.jpg');
                    });
                });


                $(document).ready(function () {
                    $('.parking-car-btn5').on('click', function () {
                        // Điền dữ liệu vào các trường
                        $('#roll').val('5');
                        $('#name').val('10');
    
                        // Thay đổi hình ảnh
                        $('#carImage5').attr('src', 'img/car1.jpg');
                    });
    
                    $('.get-car-btn5').on('click', function () {
                        // Điền dữ liệu vào các trường
                        $('#roll').val('5');
                        $('#name').val('12');
    
                        // Thay đổi hình ảnh
                        $('#carImage5').attr('src', 'img/volk_1.jpg');
                    });
                });


                $(document).ready(function () {
                    $('.parking-car-btn6').on('click', function () {
                        // Điền dữ liệu vào các trường
                        $('#roll').val('6');
                        $('#name').val('10');
    
                        // Thay đổi hình ảnh
                        $('#carImage6').attr('src', 'img/car1.jpg');
                    });
    
                    $('.get-car-btn6').on('click', function () {
                        // Điền dữ liệu vào các trường
                        $('#roll').val('6');
                        $('#name').val('12');
    
                        // Thay đổi hình ảnh
                        $('#carImage6').attr('src', 'img/volk_1.jpg');
                    });
                });


                $(document).ready(function () {
                    $('.parking-car-btn7').on('click', function () {
                        // Điền dữ liệu vào các trường
                        $('#roll').val('7');
                        $('#name').val('10');
    
                        // Thay đổi hình ảnh
                        $('#carImage7').attr('src', 'img/car1.jpg');
                    });
    
                    $('.get-car-btn7').on('click', function () {
                        // Điền dữ liệu vào các trường
                        $('#roll').val('7');
                        $('#name').val('12');
    
                        // Thay đổi hình ảnh
                        $('#carImage7').attr('src', 'img/volk_1.jpg');
                    });
                });

                $(document).ready(function () {
                    $('.parking-car-btn8').on('click', function () {
                        // Điền dữ liệu vào các trường
                        $('#roll').val('8');
                        $('#name').val('10');
    
                        // Thay đổi hình ảnh
                        $('#carImage8').attr('src', 'img/car1.jpg');
                    });
    
                    $('.get-car-btn8').on('click', function () {
                        // Điền dữ liệu vào các trường
                        $('#roll').val('8');
                        $('#name').val('12');
    
                        // Thay đổi hình ảnh
                        $('#carImage8').attr('src', 'img/volk_1.jpg');
                    });
                });


                
            </script>
            <section class="form" id="form">
            <div class="form">
                Location: <input type="text" name="RollNo" id="roll" /> <br /><br />
                Your Name: <input type="text" name="name" id="name" /> <br /><br />
            </div>
            </section>
            <div class="buttons">
                <button id="insert">Except</button>
                <button id="close">Close</button>
              </div>

              <script>
                document.getElementById("close").addEventListener("click", function() {
                    // Redirect to index.html when the "Close" button is clicked
                    window.location.href = "index.html";
                });
            </script>


            <style>
                .moving-image {
                    width: 150px;
                    position: absolute;
                    top: 30px; /* Điều chỉnh giá trị top để di chuyển lên hoặc xuống */
                    right: 20px; /* Điều chỉnh giá trị right để di chuyển sang bên phải hoặc trái */
                }  
            </style>
      
        </div>
    </section>

    <div>
        <button id="toggleButton" onmousedown="setButtonValue('Up')" onmouseup="setButtonValue('false')">UP</button>
        <button id="button1" onmousedown="setButtonValue('Down')" onmouseup="setButtonValue('false')">DOWN</button>
        <button id="btnOnId_01" onmousedown="setButtonValue('Forward')" onmouseup="setButtonValue('false')">FORWARD</button>
        <button id="btnOffId_01" onmousedown="setButtonValue('Reverse')" onmouseup="setButtonValue('false')">REVERSE</button>
        <button id="button2" onmousedown="setButtonValue('In')" onmouseup="setButtonValue('false')">IN</button>
        <button id="button3" onmousedown="setButtonValue('Out')" onmouseup="setButtonValue('false')">OUT</button>
    </div>

    <style>
        div {
            text-align: center;
        }

        button {
            margin: 10px;
            padding: 15px 30px;
            font-size: 1.2em;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            transition: transform 0.3s ease-in-out;
            color: #fff; /* Text color for buttons */
            margin-top: 0px;
        }

        #toggleButton {
            background-color: #008CBA;
            background-image: url('up_arrow.png'); /* Đường dẫn đến hình ảnh cho nút UP */
        }

        #btnOnId_01, #btnOffId_01 {
            background-color: #008CBA;
            background-image: url('forward_arrow.png'); /* Đường dẫn đến hình ảnh cho nút FORWARD */
        }

        #button1, #button2, #button3 {
            background-color: #008CBA;
            background-image: url('down_arrow.png'); /* Đường dẫn đến hình ảnh cho nút DOWN */
        }

        /* Hiệu ứng di chuyển khi nút được nhấn xuống */
        button:active {
            transform: translateY(5px);
        }
    </style>


    
    <!-- Đặt mã JavaScript ở cuối trang để đảm bảo tất cả các phần tử đã được load -->
    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyA43Hde625yMEu7q82kw4_ddHqwNigYvJQ",
            authDomain: "conect-to-firebase.firebaseapp.com",
            databaseURL: "https://conect-to-firebase-default-rtdb.firebaseio.com",
            projectId: "conect-to-firebase",
            storageBucket: "conect-to-firebase.appspot.com",
            messagingSenderId: "557246254108",
            appId: "1:557246254108:web:9dd705ba70c7da9427e3d9",
        };
        firebase.initializeApp(firebaseConfig);

        // Hàm để cập nhật giá trị và gửi lên Firebase
        function setButtonValue(buttonId) {
            var controlRef = firebase.database().ref("/Control");

            // Đặt giá trị của trường tương ứng với nút được nhấn
            var updates = {};
            updates[buttonId] = "true";

            // Cập nhật dữ liệu trên Firebase
            controlRef.update(updates);

            // Đặt các giá trị khác về "false"
            var otherButtons = ['Up', 'Down', 'In', 'Out', 'Forward', 'Reverse'];
            otherButtons.forEach(function (btn) {
                if (btn !== buttonId) {
                    updates[btn] = "false";
                }
            });

            // Cập nhật các giá trị khác trên Firebase
            controlRef.update(updates);
        }
    </script>


    <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase.js"></script>

    <script src="./fireConfig.js"></script>

    <script src="./controls.js"></script>
    <link rel="stylesheet" href="style.css">

  </body>


<!-- Thêm Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<!-- Khởi tạo cấu hình Firebase -->
<script>
    var firebaseConfig = {
        apiKey: "AIzaSyA43Hde625yMEu7q82kw4_ddHqwNigYvJQ",
        authDomain: "conect-to-firebase.firebaseapp.com",
        databaseURL: "https://conect-to-firebase-default-rtdb.firebaseio.com",
        projectId: "conect-to-firebase",
        storageBucket: "conect-to-firebase.appspot.com",
        messagingSenderId: "557246254108",
        appId: "1:557246254108:web:9dd705ba70c7da9427e3d9",
    };

    // Khởi tạo Firebase
    firebase.initializeApp(firebaseConfig);

    // Lấy reference đến cơ sở dữ liệu
    var database = firebase.database();
</script>

<script>
    function continuouslySendDataToFirebase() {
        setInterval(function() {
            var historyRef = database.ref("History");
    
            historyRef.once("value").then(function(snapshot) {
                var historyData = snapshot.val();
    
                if (historyData) {
                    var locationsCount = {};
    
                    for (var key in historyData) {
                        if (historyData.hasOwnProperty(key)) {
                            var record = historyData[key];
                            var location = record.Location;
    
                            if (location !== "Location") {
                                if (locationsCount[location]) {
                                    locationsCount[location]++;
                                } else {
                                    locationsCount[location] = 1;
                                }
                            }
                        }
                    }
    
                    var countRef = database.ref("SoLuong");
    
                    // Gửi dữ liệu lên Firebase với các trường con dạng "Location1: 5", "Location2: 5", v.v.
                    for (var loc in locationsCount) {
                        var locCountRef = countRef.child("Location" + loc);
                        locCountRef.set(locationsCount[loc]);
                    }
    
                    console.log("Dữ liệu đã được gửi lên Firebase thành công!");
                } else {
                    console.log("Không có dữ liệu từ Firebase.");
                }
            });
        }, 50);
    }
    
    continuouslySendDataToFirebase();
</script>
</html>
